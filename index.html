from flask import Flask, render_template, request

app = Flask(__name__)

# Karbon ayak izi hesaplama fonksiyonu
def calculate_carbon_footprint(transport, electricity, diet):
    score = 0
    
    # Ulaşım
    if transport == "walking":
        score += 0
    elif transport == "bike":
        score += 1
    elif transport == "bus":
        score += 3
    elif transport == "car":
        score += 6
    
    # Elektrik kullanımı
    if electricity == "low":
        score += 2
    elif electricity == "medium":
        score += 4
    elif electricity == "high":
        score += 6
    
    # Beslenme alışkanlıkları
    if diet == "vegetarian":
        score += 2
    elif diet == "balanced":
        score += 4
    elif diet == "meat":
        score += 6
    
    return score

@app.route("/", methods=["GET", "POST"])
def index():
    if request.method == "POST":
        transport = request.form.get("transport")
        electricity = request.form.get("electricity")
        diet = request.form.get("diet")
        
        score = calculate_carbon_footprint(transport, electricity, diet)
        
        if score <= 6:
            result = "Harika! Çevreci bir kahramansın! 🌿"
        elif score <= 12:
            result = "Fena değil ama daha dikkatli olmalısın! ⚠️"
        else:
            result = "Çevre için daha dikkatli olmalısın! 🚨"
        
        return render_template("result.html", score=score, result=result)
    
    return render_template("index.html")

if __name__ == "__main__":
    app.run(debug=True)

# index.html dosyası
index_html = """
<!DOCTYPE html>
<html>
<head>
    <title>Karbon Ayak İzi Hesaplama</title>
</head>
<body>
    <h1>Karbon Ayak İzi Hesapla</h1>
    <form method="post">
        <label>Nasıl ulaşıyorsun?</label>
        <select name="transport">
            <option value="walking">Yürüyerek</option>
            <option value="bike">Bisiklet</option>
            <option value="bus">Otobüs</option>
            <option value="car">Araba</option>
        </select>
        <br>
        <label>Elektrik kullanımın nasıl?</label>
        <select name="electricity">
            <option value="low">Düşük</option>
            <option value="medium">Orta</option>
            <option value="high">Yüksek</option>
        </select>
        <br>
        <label>Beslenme alışkanlığın?</label>
        <select name="diet">
            <option value="vegetarian">Vejetaryen</option>
            <option value="balanced">Dengeli</option>
            <option value="meat">Et ağırlıklı</option>
        </select>
        <br>
        <button type="submit">Hesapla</button>
    </form>
</body>
</html>
"""

# result.html dosyası
result_html = """
<!DOCTYPE html>
<html>
<head>
    <title>Sonuç</title>
</head>
<body>
    <h1>Sonuç: {{ score }}</h1>
    <p>{{ result }}</p>
    <a href="/">Tekrar Hesapla</a>
</body>
</html>
"""

# HTML dosyalarını kaydetme
with open("templates/index.html", "w") as f:
    f.write(index_html)

with open("templates/result.html", "w") as f:
    f.write(result_html)
