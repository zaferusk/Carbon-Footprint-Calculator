from flask import Flask, render_template, request

app = Flask(__name__)

# Karbon ayak izi hesaplama fonksiyonu
def calculate_carbon_footprint(transport, electricity, diet):
    score = 0
    
    # UlaÅŸÄ±m
    if transport == "walking":
        score += 0
    elif transport == "bike":
        score += 1
    elif transport == "bus":
        score += 3
    elif transport == "car":
        score += 6
    
    # Elektrik kullanÄ±mÄ±
    if electricity == "low":
        score += 2
    elif electricity == "medium":
        score += 4
    elif electricity == "high":
        score += 6
    
    # Beslenme alÄ±ÅŸkanlÄ±klarÄ±
    if diet == "vegetarian":
        score += 2
    elif diet == "balanced":
        score += 4
    elif diet == "meat":
        score += 6
    
    return score

@app.route("/", methods=["GET", "POST"])
def index():
    if request.method == "POST":
        transport = request.form.get("transport")
        electricity = request.form.get("electricity")
        diet = request.form.get("diet")
        
        score = calculate_carbon_footprint(transport, electricity, diet)
        
        if score <= 6:
            result = "Harika! Ã‡evreci bir kahramansÄ±n! ðŸŒ¿"
        elif score <= 12:
            result = "Fena deÄŸil ama daha dikkatli olmalÄ±sÄ±n! âš ï¸"
        else:
            result = "Ã‡evre iÃ§in daha dikkatli olmalÄ±sÄ±n! ðŸš¨"
        
        return render_template("result.html", score=score, result=result)
    
    return render_template("index.html")

if __name__ == "__main__":
    app.run(debug=True)

# index.html dosyasÄ±
index_html = """
<!DOCTYPE html>
<html>
<head>
    <title>Karbon Ayak Ä°zi Hesaplama</title>
</head>
<body>
    <h1>Karbon Ayak Ä°zi Hesapla</h1>
    <form method="post">
        <label>NasÄ±l ulaÅŸÄ±yorsun?</label>
        <select name="transport">
            <option value="walking">YÃ¼rÃ¼yerek</option>
            <option value="bike">Bisiklet</option>
            <option value="bus">OtobÃ¼s</option>
            <option value="car">Araba</option>
        </select>
        <br>
        <label>Elektrik kullanÄ±mÄ±n nasÄ±l?</label>
        <select name="electricity">
            <option value="low">DÃ¼ÅŸÃ¼k</option>
            <option value="medium">Orta</option>
            <option value="high">YÃ¼ksek</option>
        </select>
        <br>
        <label>Beslenme alÄ±ÅŸkanlÄ±ÄŸÄ±n?</label>
        <select name="diet">
            <option value="vegetarian">Vejetaryen</option>
            <option value="balanced">Dengeli</option>
            <option value="meat">Et aÄŸÄ±rlÄ±klÄ±</option>
        </select>
        <br>
        <button type="submit">Hesapla</button>
    </form>
</body>
</html>
"""

# result.html dosyasÄ±
result_html = """
<!DOCTYPE html>
<html>
<head>
    <title>SonuÃ§</title>
</head>
<body>
    <h1>SonuÃ§: {{ score }}</h1>
    <p>{{ result }}</p>
    <a href="/">Tekrar Hesapla</a>
</body>
</html>
"""

# HTML dosyalarÄ±nÄ± kaydetme
with open("templates/index.html", "w") as f:
    f.write(index_html)

with open("templates/result.html", "w") as f:
    f.write(result_html)
